# Vite library mode commit-by-commit

This project is intended for demonstrating the config changes needed to turn a default Ember vite app into a universal library.

## How to use this project

The goal of this project is to import the ember app into the angular app, and render it there without any weird iframe tricks.

In order to simulate a "real" install from the npm registry, the angular app depends on the tarball of the ember project, as generated by the standard `pnpm pack` command.

Start at step 1, and run `pnpm install`.

For each commit in the chain, you can run `pnpm build` in the workspace root to execute a build-pack-install cycle, and then run `pnpm start` to start the angular app.

At some stages, this will intentionally crash or not work properly, in order to demonstrate the problems as we go through each of the required changes step by step.

# Step 1: The beginning

We start with the initial setup: both apps are cleanly generated from their respective CLIs. Run `pnpm install`, followed by `pnpm start` to make sure everything works correctly. The default angular app should start.

# Step 2: naive dependency

We'll first try to naively see if we can import the ember app into angular, in order to understand what library mode is doing for us.

- we add a dependency on the ember project in the angular app
- we try to import something

(Note the build command is now modified to also install the tarball in the angular project. If you haven't ran `pnpm install` at this point, it may fail since it won't find the tarball which the angular project now depends on. Simply run `pnpm emberapp install` first, then `pnpm build`, after which you should be able to run `pnpm install` in the root.)

Starting the angular app now gives us a type error, indicating that typescript does not yet understand the module.

